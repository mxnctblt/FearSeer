<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>Horror Movies</title>
</head>
<body>
<h1>Horror Movies</h1>

<!-- Search form -->
<form action="/search" method="GET">
    <input type="text" name="query" placeholder="Search a movie..." required>
    <button type="submit">Search</button>
</form>

<ul>
    <li th:each="movie : ${movies}">
        <h2 th:text="${movie['title']}"></h2>
        <img th:src="'https://image.tmdb.org/t/p/w500/' + ${movie['poster_path']}" alt="Movie Poster">

        <!-- Conditionally show the button or message based on quiz availability -->
        <div th:if="${quizMovieTitles.contains(movie['title'])}">
            <a th:href="@{/quiz/{movieTitle}(movieTitle=${movie['title']})}">Take Quiz</a>
        </div>
        <div th:unless="${quizMovieTitles.contains(movie['title'])}">
            <p>Quiz doesn't exist yet</p>
        </div>
    </li>
</ul>

<p th:if="${movies.size() == 0}">No results found for your search</p>
</body>
</html>
